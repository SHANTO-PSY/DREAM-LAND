<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <title>Dream Land тАФ Welcome тЖТ Rules тЖТ Loan Rules тЖТ Login тЖТ Info</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#163754; --card:#0f2a41; }
    *{ box-sizing:border-box }
    body{
      margin:0;background:var(--bg);color:#fff;min-height:100vh;
      display:grid;place-items:center;font-family:system-ui, Segoe UI, Arial
    }
    .card{
      width:560px;max-width:94vw;background:var(--card);
      border:1px solid #184261;padding:22px;border-radius:16px;
      box-shadow:0 14px 40px rgba(0,0,0,.25)
    }
    h1,h2{margin:0 0 12px;text-align:center}
    p{margin:0 0 10px}
    .hidden{display:none !important;}
    .logo{width:150px;height:150px;object-fit:contain;display:block;margin:0 auto 14px}
    .grid-btn{display:grid;gap:12px;margin:18px 0}

    button{
      width:100%;padding:12px;border:0;border-radius:10px;color:#fff;
      font-size:16px;cursor:pointer;font-weight:600;
    }
    button:hover{filter:brightness(.9)}
    button:disabled{opacity:.6;cursor:not-allowed}

    .btn-member   { background:#4CAF50; }
    .btn-loan     { background:#2196F3; }
    .btn-login    { background:#FF9800; }
    .btn-committee{ background:#9C27B0; }
    .btn-pdf      { background:#f44336; }

    a{text-decoration:none}
    label{display:block;margin:8px 0 4px}
    input{
      width:100%;height:44px;line-height:44px;padding:0 14px;
      border-radius:8px;border:1px solid #2b5576;background:#0b2336;color:#eef
    }
    .msg{min-height:1.2em;margin:10px 0;font-weight:700}
    .ok{color:#4ad97f}.err{color:#ff6b6b}

    .grid{
      display:grid;grid-template-columns:140px 1fr;gap:8px 10px;margin-top:10px
    }
    .row{position:relative}
    .row input{padding-right:46px}
    .eye{
      position:absolute;right:10px;top:50%;transform:translateY(-50%);
      width:28px;height:28px;display:inline-flex;align-items:center;justify-content:center;
      background:transparent;border:0;color:#bcd;cursor:pointer
    }
    .link{color:#9ad6ff;cursor:pointer;text-align:center;display:block;margin-top:10px}

    .article{margin-top:16px;text-align:left;line-height:1.6}
    ul{margin:8px 0 0 18px}

    .notice{
      background:#fff3cd;color:#533f03;border:1px solid #ffecb5;
      border-radius:12px;padding:14px 16px;box-shadow:0 6px 18px rgba(0,0,0,.15);
      margin-bottom:12px;
    }
    .notice h3{margin:0 0 8px;font-size:18px;text-align:left;display:flex;align-items:center;gap:8px;}
    .notice ul{margin:8px 0 0 22px;line-height:1.55}

    #successAnim{ text-align:center; animation:fadeIn .5s ease; }
    .anim-box{ width:120px;height:120px;margin:40px auto 14px;position:relative; }
    .circle{
      width:120px;height:120px;border-radius:50%;background:#4CAF50;
      display:flex;align-items:center;justify-content:center;position:absolute;inset:0;
      animation:popIn .6s ease;
    }
    .check{
      width:40px;height:20px;border-left:5px solid #fff;border-bottom:5px solid #fff;
      transform:rotate(-45deg);margin:auto;animation:drawCheck .8s ease forwards;
    }
    #welcomeName{
      font-size:22px;font-weight:800;margin-top:6px;
      font-family: "Hind Siliguri", system-ui, sans-serif;
      animation:zoomIn 1s ease;
    }
    @keyframes popIn{from{transform:scale(0);opacity:0} to{transform:scale(1);opacity:1}}
    @keyframes drawCheck{from{width:0;height:0} to{width:40px;height:20px}}
    @keyframes zoomIn{from{transform:scale(.5);opacity:0} to{transform:scale(1);opacity:1}}
    @keyframes fadeIn{from{opacity:0} to{opacity:1}}
  </style>
</head>
<body>

  <!-- Welcome -->
  <div id="welcome" class="card">
    <img class="logo" src="./logo.png"
         onerror="this.onerror=null;this.src='https://drive.google.com/uc?export=view&id=1EGbLTY58jMndZr54waGm7RjeqcX5SYsP';"
         alt="Logo">

    <h1>рж╕рзНржмрж╛ржЧрждржо!</h1>
    <p>тАЬрж╕рзНржмржкрзНржи ржирзАрзЬ рж╕рзЛрж╕рж╛ржЗржЯрж┐тАЭ-рждрзЗ ржЖржкржирж╛ржХрзЗ ржЖржирзНрждрж░рж┐ржХ рж╕рзНржмрж╛ржЧрждржо ЁЯМ╕</p>

    <div class="grid-btn">
      <button id="showRules" class="btn-member">ЁЯУе ржбрж╛ржЙржирж▓рзЛржб рж╕ржжрж╕рзНржп ржЖржмрзЗржжржи ржлрж░рзНржо</button>
      <button id="showLoanRules" class="btn-loan">ЁЯУе ржЛржг ржкрзНрж░ржжрж╛ржирзЗрж░ ржирж┐рзЯржорж╛ржмрж▓рзА</button>
      <button id="goLogin" class="btn-login">ЁЯФС рж╕ржжрж╕рзНржп рж▓ржЧ ржЗржи</button>
      <button id="goCommittees" class="btn-committee">ЁЯСе ржЖржорж╛ржжрзЗрж░ ржХржорж┐ржЯрж┐</button>
    </div>

    <!-- тЬЕ рж╕рж╛ржорзНржкрзНрж░рждрж┐ржХ ржЖрж░рзНржЯрж┐ржХрзЗрж▓ -->
    <div class="article">
      <h2>ЁЯУ░ рж╕рж╛ржорзНржкрзНрж░рждрж┐ржХ ржЖрж░рзНржЯрж┐ржХрзЗрж▓</h2>
      <p>ЁЯСЙ ржЖржорж╛ржжрзЗрж░ рж╕ржорж╛ржЬ ржЙржирзНржирзЯржирзЗрж░ ржЬржирзНржп ржмрж┐ржнрж┐ржирзНржи ржХрж░рзНржорж╕рзВржЪрж┐ ржЪрж▓ржЫрзЗред</p>
      <p>ЁЯСЙ ржЛржг ржкрзНрж░ржжрж╛ржирзЗрж░ ржирж┐рзЯржорж╛ржмрж▓рзА рж╢рзАржШрзНрж░ржЗ ржЖржкржбрзЗржЯ ржХрж░рж╛ рж╣ржмрзЗред</p>
      <p>ЁЯСЙ ржирждрзБржи рж╕ржжрж╕рзНржп рж╕ржВржЧрзНрж░рж╣ ржЕржнрж┐ржпрж╛ржи рж╢рзБрж░рзБ рж╣рзЯрзЗржЫрзЗред</p>
    </div>
  </div>

  <!-- Member Rules -->
  <div id="rules" class="card hidden">
    <div class="notice">
      <h3>тЪая╕П рж╕ржжрж╕рзНржп рж╣ржУрзЯрж╛рж░ ржирж┐рзЯржорж╛ржмрж▓рзА</h3>
      <ul>
        <li>рзи ржХржкрж┐ ржЫржмрж┐, ржПржиржЖржЗржбрж┐ ржХржкрж┐ ржУ рзирзжрзж ржЯрж╛ржХрж╛ ржлрж┐ ржЬржорж╛ ржжрж┐рждрзЗ рж╣ржмрзЗред</li>
        <li>ржкрзНрж░рждрж┐ ржорж╛рж╕рзЗрж░ рззрзл рждрж╛рж░рж┐ржЦрзЗ рж╕рж╛ржмрж╕рзНржХрзНрж░рж┐ржкрж╢ржи ржлрж┐ ржжрж┐рждрзЗ рж╣ржмрзЗ, ржирж╛ ржжрж┐рж▓рзЗ рзлрзжрзж ржЯрж╛ржХрж╛ ржЬрж░рж┐ржорж╛ржирж╛ред</li>
        <li>ржкрж░ржкрж░ рзй ржорж╛рж╕ ржХрж┐рж╕рзНрждрж┐ ржирж╛ ржжрж┐рж▓рзЗ рж╕ржжрж╕рзНржпржкржж ржмрж╛рждрж┐рж▓ рж╣рждрзЗ ржкрж╛рж░рзЗред</li>
        <li>рж╢рзЗрзЯрж╛рж░ ржмрж╛рждрж┐рж▓ ржХрж░рждрзЗ рж╣рж▓рзЗ рзй ржорж╛рж╕ ржЖржЧрзЗ рж▓рж┐ржЦрж┐ржд ржЖржмрзЗржжржи ржХрж░рждрзЗ рж╣ржмрзЗред</li>
        <li>ржмрзЗрж░ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ ржорзЛржЯ ржЯрж╛ржХрж╛рж░ рзл% ржХрж░рзНрждржи ржХрж░рж╛ рж╣ржмрзЗред</li>
        <li>рзл ржмржЫрж░рзЗрж░ ржмрзЗрж╢рж┐ ржорзЗрзЯрж╛ржжрзЗ ржЗржирзНржЯрж╛рж░рзЗрж╕рзНржЯ ржкрзНрж░ржжрж╛ржи ржХрж░рж╛ рж╣ржмрзЗ ржирж╛ред</li>
      </ul>
    </div>
    <a href="forms/member_form.pdf" target="_blank">
      <button class="btn-member">тмЗя╕П ржлрж░рзНржо ржбрж╛ржЙржирж▓рзЛржб ржХрж░рзБржи</button>
    </a>
    <span class="link" id="backHomeRules">тЖР рж╣рзЛржорзЗ ржлрж┐рж░рзБржи</span>
  </div>

  <!-- Loan Rules -->
  <div id="loanRules" class="card hidden">
    <div class="notice">
      <h3>ЁЯТ░ ржЛржг ржкрзНрж░ржжрж╛ржирзЗрж░ ржирж┐рзЯржорж╛ржмрж▓рзА</h3>
      <ul>
        <li>рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕ржХрзНрж░рж┐рзЯ рж╕ржжрж╕рзНржпрж░рж╛ржЗ ржЛржг ржЖржмрзЗржжржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред</li>
        <li>ржЛржг ржЧрзНрж░рж╣ржгрзЗрж░ ржЬржирзНржп ржХржоржкржХрзНрж╖рзЗ рзм ржорж╛рж╕рзЗрж░ рж╕ржжрж╕рзНржпржкржж ржерж╛ржХрждрзЗ рж╣ржмрзЗред</li>
        <li>ржЛржг рж╕рж░рзНржмрзЛржЪрзНржЪ рж╢рзЗрзЯрж╛рж░рзЗрж░ ржжрзНржмрж┐ржЧрзБржг ржкрж░рзНржпржирзНржд ржирзЗржУрзЯрж╛ ржпрж╛ржмрзЗред</li>
        <li>ржЛржгрзЗрж░ ржХрж┐рж╕рзНрждрж┐ ржорж╛рж╕рж┐ржХ ржнрж┐рждрзНрждрж┐рждрзЗ рж╢рзЛржз ржХрж░рждрзЗ рж╣ржмрзЗред</li>
        <li>ржХрзЛржирзЛ ржХрж┐рж╕рзНрждрж┐ ржорж┐рж╕ ржХрж░рж▓рзЗ ржЕрждрж┐рж░рж┐ржХрзНржд рзл% ржЬрж░рж┐ржорж╛ржирж╛ ржпрзЛржЧ рж╣ржмрзЗред</li>
        <li>ржЛржг ржкрж░рж┐рж╢рзЛржз ржирж╛ ржХрж░рж▓рзЗ рж╕ржВржЧржаржирзЗрж░ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржЕржирзБржпрж╛рзЯрзА ржЖржЗржиржЧржд ржмрзНржпржмрж╕рзНржерж╛ ржирзЗржУрзЯрж╛ рж╣ржмрзЗред</li>
      </ul>
    </div>
    <a href="forms/loan_form.pdf" target="_blank">
      <button class="btn-loan">тмЗя╕П ржЛржг ржлрж░рзНржо ржбрж╛ржЙржирж▓рзЛржб ржХрж░рзБржи</button>
    </a>
    <span class="link" id="backHomeLoanRules">тЖР рж╣рзЛржорзЗ ржлрж┐рж░рзБржи</span>
  </div>

  <!-- Login -->
  <div id="login" class="card hidden">
    <h2>рж▓ржЧржЗржи (CODE + PASS)</h2>
    <label>CODE</label>
    <input id="code" placeholder="User ID">
    <label>PASS</label>
    <div class="row">
      <input id="pass" type="password" placeholder="Password">
      <button class="eye" id="togglePass">ЁЯСБ</button>
    </div>
    <button id="loginBtn" class="btn-login">рж▓ржЧржЗржи</button>
    <div id="msg" class="msg"></div>
    <span class="link" id="backHome1">тЖР рж╣рзЛржорзЗ ржлрж┐рж░рзБржи</span>
  </div>

  <!-- Success -->
  <div id="successAnim" class="hidden">
    <div class="anim-box">
      <div class="circle"><div class="check"></div></div>
    </div>
    <div id="welcomeName">рж╕рзНржмрж╛ржЧрждржо!</div>
  </div>

  <!-- Result -->
  <div id="result" class="card hidden">
    <h2>ржЖржкржирж╛рж░ рждржерзНржп</h2>
    <div class="grid">
      <div>CODE</div><div id="v_code"></div>
      <div>NAME</div><div id="v_name"></div>
      <div>NID NO</div><div id="v_nid"></div>
      <div>PHONE</div><div id="v_phone"></div>
      <div>INSTALMENT</div><div id="v_inst"></div>
      <div>TOTAL PAY</div><div id="v_pay"></div>
    </div>
    <button id="downloadPdf" class="btn-pdf">ЁЯУД ржбрж╛ржЙржирж▓рзЛржб ржорзЗржорзНржмрж╛рж░ ржХрж╛рж░рзНржб</button>
    <button id="logout" class="btn-login">рж▓ржЧржЖржЙржЯ</button>
    <span class="link" id="backHome2">тЖР рж╣рзЛржорзЗ ржлрж┐рж░рзБржи</span>
  </div>

  <!-- Committees -->
  <div id="committees" class="card hidden">
    <h2>ржЖржорж╛ржжрзЗрж░ ржХржорж┐ржЯрж┐</h2>
    <ul>
      <li>рж╕ржнрж╛ржкрждрж┐: ржЬржирж╛ржм ржЕржорзБржХ</li>
      <li>рж╕рж╛ржзрж╛рж░ржг рж╕ржорзНржкрж╛ржжржХ: ржЬржирж╛ржм рждржорзБржХ</li>
      <li>ржХрзЛрж╖рж╛ржзрзНржпржХрзНрж╖: ржЬржирж╛ржм XYZ</li>
    </ul>
    <span class="link" id="backHome3">тЖР рж╣рзЛржорзЗ ржлрж┐рж░рзБржи</span>
  </div>

  <!-- Firebase + jsPDF -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyApZH0la4dyXRJ1rSJVBlusIrLhmAIehLk",
      authDomain: "dream-land-e55e0.firebaseapp.com",
      databaseURL: "https://dream-land-e55e0-default-rtdb.firebaseio.com",
      projectId: "dream-land-e55e0",
      storageBucket: "dream-land-e55e0.firebasestorage.app",
      messagingSenderId: "544133561119",
      appId: "1:544133561119:web:2a30b38a7b1d9f93cfce2a"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const $ = id => document.getElementById(id);
    const show = id => $(id).classList.remove('hidden');
    const hide = id => $(id).classList.add('hidden');

    // Navigation
    $("showRules").onclick     = () => { hide("welcome"); show("rules"); };
    $("showLoanRules").onclick = () => { hide("welcome"); show("loanRules"); };
    $("backHomeRules").onclick = () => { hide("rules"); show("welcome"); };
    $("backHomeLoanRules").onclick = () => { hide("loanRules"); show("welcome"); };
    $("goLogin").onclick       = () => { hide("welcome"); show("login"); };
    $("goCommittees").onclick  = () => { hide("welcome"); show("committees"); };
    $("backHome1").onclick     = () => { hide("login"); show("welcome"); };
    $("backHome2").onclick     = () => { hide("result"); show("welcome"); };
    $("backHome3").onclick     = () => { hide("committees"); show("welcome"); };

    $("togglePass").onclick = () => {
      const p = $("pass");
      if (p.type === "password") { p.type = "text"; $("togglePass").textContent = "ЁЯЩИ"; }
      else { p.type = "password"; $("togglePass").textContent = "ЁЯСБ"; }
    };

    function renderRow(row){
      $("v_code").textContent  = row["1_ CODE"] ?? "";
      $("v_name").textContent  = row["2_ NAME"] ?? "";
      $("v_nid").textContent   = row["3_ NID NO"] ?? "";
      $("v_phone").textContent = row["4_ PHONE"] ?? "";
      $("v_inst").textContent  = row["5_ INSTALMENT"] ?? "";
      $("v_pay").textContent   = row["6_TOTAL PAY"] ?? "";
    }
    function say(t, ok=false){
      $("msg").textContent = t;
      $("msg").className = "msg " + (ok ? "ok" : "err");
    }

    async function doLogin(){
      say(""); hide("result");
      const code = $("code").value.trim();
      const pass = $("pass").value.trim();
      if(!code || !pass){ say("CODE ржПржмржВ PASS рж▓рж┐ржЦрзБржи"); return; }

      $("loginBtn").disabled = true;
      try{
        const snap = await db.ref("friends/"+code).once("value");
        if(!snap.exists()){ say("ржнрзБрж▓ ID тЭМ"); return; }
        const row = snap.val();
        const dbPass = String(row["7_ PASS"] ?? "").trim();

        if(dbPass === pass){
          say("рж▓ржЧржЗржи рж╕ржлрж▓ тЬЕ", true);
          renderRow(row);
          hide("login");
          $("welcomeName").textContent = row["2_ NAME"] ? `рж╕рзНржмрж╛ржЧрждржо, ${row["2_ NAME"]}!` : "рж╕рзНржмрж╛ржЧрждржо!";
          show("successAnim");
          setTimeout(() => { hide("successAnim"); show("result"); }, 2500);
        }else{ say("ржнрзБрж▓ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб тЭМ"); }
      }catch(err){ say("Firebase Error: " + (err.message || err)); }
      finally{ $("loginBtn").disabled = false; }
    }
    $("loginBtn").onclick = doLogin;

    $("logout").onclick = () => { hide("result"); show("login"); };

    $("downloadPdf").onclick = () => {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFontSize(18); doc.text("Dream Land Member Card", 20, 20);
      doc.setFontSize(12);
      doc.text("CODE: " + $("v_code").textContent, 20, 40);
      doc.text("NAME: " + $("v_name").textContent, 20, 50);
      doc.text("NID NO: " + $("v_nid").textContent, 20, 60);
      doc.text("PHONE: " + $("v_phone").textContent, 20, 70);
      doc.text("INSTALMENT: " + $("v_inst").textContent, 20, 80);
      doc.text("TOTAL PAY: " + $("v_pay").textContent, 20, 90);
      doc.save("member_card.pdf");
    };
  </script>
</body>
</html>
